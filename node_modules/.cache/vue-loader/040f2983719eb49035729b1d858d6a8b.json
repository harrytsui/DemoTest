{"remainingRequest":"/Users/harry/CSChain/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/harry/CSChain/src/components/home/order-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/harry/CSChain/src/components/home/order-list.vue","mtime":1646289811425},{"path":"/Users/harry/CSChain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/harry/CSChain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBXZWIzIGZyb20gIndlYjMiOwppbXBvcnQgY29udHJhY3QgZnJvbSAidHJ1ZmZsZS1jb250cmFjdCI7CmltcG9ydCBUcHNjIGZyb20gJy4uLy4uLy4uL2J1aWxkL2NvbnRyYWN0cy9UcHNjLmpzb24nOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC11aSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW3sKICAgICAgICBudW06ICcxJywKICAgICAgICB0YXNrbmFtZTogJ+WZqumfs+aVsOaNrumHh+mbhicsCiAgICAgICAgaWQ6ICcwMDAwMDInLAogICAgICAgIHRhc2tkZXNjcmlwdGlvbjogJ+mHh+mbhuWfjumDiuWZqumfs+aVsOaNricsCiAgICAgICAgc3RhdHVzOiAn6L+b6KGM5LitJywKICAgICAgICByb2xlOiAn5Lu75Yqh5Y+R6LW36ICFJywKICAgICAgICBjcmVhdGV0aW1lOiAnMjAyMS8xMi8xOCcKICAgICAgfSwgewogICAgICAgIGlkOiAnRUgxMTU1NjU0Nzg2NTcnLAogICAgICAgIHRhc2tuYW1lOiAn5LiA5puyJywKICAgICAgICB0b3RhbF9hbW91bnQ6ICc1OC4wMCcsCiAgICAgICAgcGF5bWVudF9hbW91bnQ6ICc1OC4wMCcsCiAgICAgICAgZGF0ZTogJzIwMjEvMTIvMTgnLAogICAgICAgIHN0YXR1czogJ+S6pOaYk+aIkOWKnycKICAgICAgfSwgewogICAgICAgIGlkOiAnRUgxMTU1NjU0Nzg2NTcnLAogICAgICAgIHRhc2tuYW1lOiAn5LiA5puyJywKICAgICAgICB0b3RhbF9hbW91bnQ6ICc1OC4wMCcsCiAgICAgICAgcGF5bWVudF9hbW91bnQ6ICc1OC4wMCcsCiAgICAgICAgZGF0ZTogJzIwMjEvNC8xOCAxNjoyMjowMScsCiAgICAgICAgc3RhdHVzOiAn5Lqk5piT5oiQ5YqfJwogICAgICB9LCB7CiAgICAgICAgaWQ6ICdFSDExNTU2NTQ3ODY1NycsCiAgICAgICAgdGFza25hbWU6ICfkuIDmm7InLAogICAgICAgIHRvdGFsX2Ftb3VudDogJzU4LjAwJywKICAgICAgICBwYXltZW50X2Ftb3VudDogJzU4LjAwJywKICAgICAgICBkYXRlOiAnMjAyMS80LzE4IDE2OjIyOjAxJywKICAgICAgICBzdGF0dXM6ICfkuqTmmJPmiJDlip8nCiAgICAgIH0sIHsKICAgICAgICBpZDogJ0VIMTE1NTY1NDc4NjU3JywKICAgICAgICB0YXNrbmFtZTogJ+S4gOabsicsCiAgICAgICAgdG90YWxfYW1vdW50OiAnNTguMDAnLAogICAgICAgIHBheW1lbnRfYW1vdW50OiAnNTguMDAnLAogICAgICAgIGRhdGU6ICcyMDIxLzQvMTggMTY6MjI6MDEnLAogICAgICAgIHN0YXR1czogJ+S6pOaYk+aIkOWKnycKICAgICAgfSwgewogICAgICAgIGlkOiAnRUgxMTU1NjU0Nzg2NTcnLAogICAgICAgIHRhc2tuYW1lOiAn5LiA5puyJywKICAgICAgICB0b3RhbF9hbW91bnQ6ICc1OC4wMCcsCiAgICAgICAgcGF5bWVudF9hbW91bnQ6ICc1OC4wMCcsCiAgICAgICAgZGF0ZTogJzIwMjEvNC8xOCAxNjoyMjowMScsCiAgICAgICAgc3RhdHVzOiAn5Lqk5piT5oiQ5YqfJwogICAgICB9LF0sCiAgICB9CiAgfSwKCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIC8vIOWIneWni+WMlndlYjPlj4rotKblj7cKICAgIGF3YWl0IHRoaXMuaW5pdFdlYjNBY2NvdW50KCkKICAgIC8vIOWIneWni+WMluWQiOe6puWunuS+iwogICAgYXdhaXQgdGhpcy5pbml0Q29udHJhY3QoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGluaXRXZWIzQWNjb3VudCgpIHsKICAgICAgaWYgKHdpbmRvdy5ldGhlcmV1bSkgewogICAgICAgIHRoaXMucHJvdmlkZXIgPSB3aW5kb3cuZXRoZXJldW07CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5lbmFibGUoKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgLy8gICBjb25zb2xlLmxvZygiVXNlciBkZW5pZWQgYWNjb3VudCBhY2Nlc3MiKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYjMpIHsKICAgICAgICB0aGlzLnByb3ZpZGVyID0gd2luZG93LndlYjMuY3VycmVudFByb3ZpZGVyOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJvdmlkZXIgPSBuZXcgV2ViMy5wcm92aWRlcnMuSHR0cFByb3ZpZGVyKCJodHRwOi8vMTI3LjAuMC4xOjg1NDUiKTsKICAgICAgfQogICAgICAgIHRoaXMud2ViMyA9IG5ldyBXZWIzKHRoaXMucHJvdmlkZXIpOwogICAgICAgIHRoaXMud2ViMy5ldGguZ2V0QWNjb3VudHMoKS50aGVuKGFjY3MgID0+IHsKICAgICAgICB0aGlzLmFjY291bnQgPSBhY2NzWzBdCiAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBpbml0Q29udHJhY3QoKSB7CiAgICAgIGNvbnN0IHRwc2NDb250cmFjdCA9IGNvbnRyYWN0KFRwc2MpOwogICAgICB0cHNjQ29udHJhY3Quc2V0UHJvdmlkZXIodGhpcy5wcm92aWRlcik7CiAgICAgIHRoaXMudHBzY0luc3RhbmNlID0gYXdhaXQgdHBzY0NvbnRyYWN0LmRlcGxveWVkKCk7CiAgICB9LAoKICAgIC8vIOWPkeW4g+aWsOS7u+WKoQogICAgYXN5bmMgcHVibGlzaFRhc2soaW5kZXgsIHJvdykgewogICAgICB0aGlzLnRwc2NJbnN0YW5jZS5hZGRUYXNrKCcxJywgJzInLCAnMicsJzInLCB7ZnJvbTogdGhpcy5hY2NvdW50LGdhczoyMTAwMDB9KS5vbigncmVjZWlwdCcsIGZ1bmN0aW9uIChyZWNlaXB0KSAKICAgICAgICAgIHtjb25zb2xlLmxvZyhyZWNlaXB0KTsKICAgICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuWPkeW4g+aIkOWKnyIsCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICB9KTt9KTsKCiAgICAgIHRoaXMuJGFsZXJ0KGDliKDpmaQg4oCcJHtyb3cuaWR94oCdIO+8n2AsICfnoa7orqTliKDpmaQnLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbGxiYWNrOiBhY3Rpb24gPT4gewogICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NhbmNlbCcpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKCfmk43kvZzlj5bmtognKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCn0K"},{"version":3,"sources":["order-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"order-list.vue","sourceRoot":"src/components/home","sourcesContent":["<template>\n  <div>\n    <el-table :data=\"tableData\" max-height=\"840px\">\n      <el-table-column label=\"序号\" prop=\"num\"> </el-table-column>\n\n      <el-table-column label=\"任务名称\" prop=\"taskname\"> </el-table-column>\n\n      <el-table-column label=\"任务ID\" prop=\"id\"> </el-table-column>\n\n      <el-table-column label=\"任务描述\" prop=\"taskdescription\"></el-table-column>\n\n      <el-table-column label=\"状态\" prop=\"status\"> </el-table-column>\n\n      <el-table-column label=\"所属角色\" prop=\"role\"> </el-table-column>\n\n      <el-table-column label=\"创建时间\" prop=\"createtime\"> </el-table-column>\n\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"publishTask(scope.$index, scope.row)\"\n          >\n            查看\n          </el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"publishTask(scope.$index, scope.row)\"\n          >\n            完成\n          </el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"publishTask(scope.$index, scope.row)\"\n          >\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-pagination\n      class=\"pagination\"\n      background\n      layout=\"prev, pager, next\"\n      :total=\"50\"\n      :page-size=\"12\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport Web3 from \"web3\";\nimport contract from \"truffle-contract\";\nimport Tpsc from '../../../build/contracts/Tpsc.json';\nimport { Message } from \"element-ui\";\n\nexport default {\n  data() {\n    return {\n      tableData: [{\n        num: '1',\n        taskname: '噪音数据采集',\n        id: '000002',\n        taskdescription: '采集城郊噪音数据',\n        status: '进行中',\n        role: '任务发起者',\n        createtime: '2021/12/18'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/12/18',\n        status: '交易成功'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/4/18 16:22:01',\n        status: '交易成功'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/4/18 16:22:01',\n        status: '交易成功'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/4/18 16:22:01',\n        status: '交易成功'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/4/18 16:22:01',\n        status: '交易成功'\n      },],\n    }\n  },\n\n  async created() {\n    // 初始化web3及账号\n    await this.initWeb3Account()\n    // 初始化合约实例\n    await this.initContract()\n  },\n\n  methods: {\n    async initWeb3Account() {\n      if (window.ethereum) {\n        this.provider = window.ethereum;\n        try {\n          await window.ethereum.enable();\n        } catch (error) {\n          //   console.log(\"User denied account access\");\n        }\n      } else if (window.web3) {\n        this.provider = window.web3.currentProvider;\n      } else {\n        this.provider = new Web3.providers.HttpProvider(\"http://127.0.0.1:8545\");\n      }\n        this.web3 = new Web3(this.provider);\n        this.web3.eth.getAccounts().then(accs  => {\n        this.account = accs[0]\n      });\n    },\n\n    async initContract() {\n      const tpscContract = contract(Tpsc);\n      tpscContract.setProvider(this.provider);\n      this.tpscInstance = await tpscContract.deployed();\n    },\n\n    // 发布新任务\n    async publishTask(index, row) {\n      this.tpscInstance.addTask('1', '2', '2','2', {from: this.account,gas:210000}).on('receipt', function (receipt) \n          {console.log(receipt);\n          Message({\n          message: \"发布成功\",\n          type: \"success\"\n        });});\n\n      this.$alert(`删除 “${row.id}” ？`, '确认删除', {\n        confirmButtonText: '确定',\n        callback: action => {\n          if (action === 'cancel') {\n            this.$message.info('操作取消');\n          }\n        }\n      });\n    }\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.pagination {\n  margin-top: 10px;\n  margin-bottom: 12px;\n}\n</style>"]}]}