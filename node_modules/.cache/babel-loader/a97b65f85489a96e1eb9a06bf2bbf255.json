{"remainingRequest":"/Users/harry/CSChain/node_modules/babel-loader/lib/index.js!/Users/harry/CSChain/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/harry/CSChain/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/harry/CSChain/src/views/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/harry/CSChain/src/views/Register.vue","mtime":1646288213691},{"path":"/Users/harry/CSChain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/harry/CSChain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9oYXJyeS9DU0NoYWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgV2ViMyBmcm9tICJ3ZWIzIjsKaW1wb3J0IGNvbnRyYWN0IGZyb20gInRydWZmbGUtY29udHJhY3QiOwppbXBvcnQgVXJzYyBmcm9tICcuLi8uLi9idWlsZC9jb250cmFjdHMvVXJzYy5qc29uJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtdWkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZyb21EYXRhOiB7CiAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgIHBhc3N3b3JkOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5pbml0V2ViM0FjY291bnQoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaW5pdENvbnRyYWN0KCk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0V2ViM0FjY291bnQ6IGZ1bmN0aW9uIGluaXRXZWIzQWNjb3VudCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuZXRoZXJldW0pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLnByb3ZpZGVyID0gd2luZG93LmV0aGVyZXVtOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5ldGhlcmV1bS5lbmFibGUoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy53ZWIzKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5wcm92aWRlciA9IHdpbmRvdy53ZWIzLmN1cnJlbnRQcm92aWRlcjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5wcm92aWRlciA9IG5ldyBXZWIzLnByb3ZpZGVycy5IdHRwUHJvdmlkZXIoImh0dHA6Ly8xMjcuMC4wLjE6ODU0NSIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX3RoaXMyLndlYjMgPSBuZXcgV2ViMyhfdGhpczIucHJvdmlkZXIpOwoKICAgICAgICAgICAgICAgIF90aGlzMi53ZWIzLmV0aC5nZXRBY2NvdW50cygpLnRoZW4oZnVuY3Rpb24gKGFjY3MpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmFjY291bnQgPSBhY2NzWzBdOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMiwgN11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaW5pdENvbnRyYWN0OiBmdW5jdGlvbiBpbml0Q29udHJhY3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHVyc2NDb250cmFjdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXJzY0NvbnRyYWN0ID0gY29udHJhY3QoVXJzYyk7CiAgICAgICAgICAgICAgICB1cnNjQ29udHJhY3Quc2V0UHJvdmlkZXIoX3RoaXMzLnByb3ZpZGVyKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB1cnNjQ29udHJhY3QuZGVwbG95ZWQoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX3RoaXMzLnVyc2NJbnN0YW5jZSA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjaGVja0VtcHR5OiBmdW5jdGlvbiBjaGVja0VtcHR5KCkgewogICAgICByZXR1cm4gdGhpcy5mcm9tRGF0YS51c2VybmFtZSAhPT0gJycgJiYgdGhpcy5mcm9tRGF0YS5wYXNzd29yZCAhPT0gJyc7CiAgICB9LAogICAgLy8g54K55Ye755m75b2V5oyJ6ZKuCiAgICBoYW5kbGVyZWdpc3RlcjogZnVuY3Rpb24gaGFuZGxlcmVnaXN0ZXIoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzNC51cnNjSW5zdGFuY2UucmVnaXN0ZXJNZW1iZXIoX3RoaXM0LmZyb21EYXRhLnVzZXJuYW1lLCBfdGhpczQuZnJvbURhdGEucGFzc3dvcmQsIHsKICAgICAgICAgICAgICAgICAgZnJvbTogX3RoaXM0LmFjY291bnQsCiAgICAgICAgICAgICAgICAgIGdhczogMjEwMDAwCiAgICAgICAgICAgICAgICB9KS5vbigncmVjZWlwdCcsIGZ1bmN0aW9uIChyZWNlaXB0KSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlY2VpcHQpOwogICAgICAgICAgICAgICAgICBNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5rOo5YaM5oiQ5YqfIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsgLy92YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgICAgICAvL3RoaXMuJHN0b3JlLnN0YXRlLmNvbnRyYWN0SW5zdGFuY2UoKS5tZXRob2RzLgogICAgICAgICAgICAgICAgLy8gdGhpcy51cnNjSW5zdGFuY2UucmVnaXN0ZXJNZW1iZXIodGhpcy5mcm9tRGF0YS51c2VybmFtZSwgdGhpcy5mcm9tRGF0YS5wYXNzd29yZCkuc2VuZCh7ZnJvbTogdGhpcy5hY2NvdW50LGdhczozMDAwMDB9KS5vbigncmVjZWlwdCcsIGZ1bmN0aW9uIChyZWNlaXB0KSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgY29uc29sZS5sb2cocmVjZWlwdCk7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfms6jlhozmiJDlip8nKTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"login-wrap\">\n    <el-form\n      class=\"login-form\"\n      label-position=\"top\"\n      label-width=\"80px\"\n      :model=\"fromData\"\n    >\n      <h2>注册</h2>\n      <el-form-item label=\"用户名\">\n        <el-input\n          v-model=\"fromData.username\"\n          placeholder=\"请输入用户名\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\">\n        <el-input\n          v-model=\"fromData.password\"\n          placeholder=\"请输入密码\"\n          type=\"password\"\n        ></el-input>\n      </el-form-item>\n      <el-button class=\"btn-login\" @click=\"handleregister\" type=\"primary\">\n        注册\n      </el-button>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport Web3 from \"web3\";\nimport contract from \"truffle-contract\";\nimport Ursc from '../../build/contracts/Ursc.json';\nimport { Message } from \"element-ui\";\n\nexport default {\n  data() {\n    return {\n      fromData: {\n        username: '',\n        password: '',\n      }\n    };\n  },\n\n  async created() {\n    // 初始化web3及账号\n    await this.initWeb3Account()\n    // 初始化合约实例\n    await this.initContract()\n  },\n\n  methods: {\n    async initWeb3Account() {\n      if (window.ethereum) {\n        this.provider = window.ethereum;\n        try {\n          await window.ethereum.enable();\n        } catch (error) {\n          //   console.log(\"User denied account access\");\n        }\n      } else if (window.web3) {\n        this.provider = window.web3.currentProvider;\n      } else {\n        this.provider = new Web3.providers.HttpProvider(\"http://127.0.0.1:8545\");\n      }\n      this.web3 = new Web3(this.provider);\n      this.web3.eth.getAccounts().then(accs  => {\n        this.account = accs[0]\n      });\n    },\n\n    async initContract() {\n      const urscContract = contract(Ursc);\n      urscContract.setProvider(this.provider);\n      this.urscInstance = await urscContract.deployed();\n    },\n\n    checkEmpty() {\n      return this.fromData.username !== '' && this.fromData.password !== '';\n    },\n\n    // 点击登录按钮\n    async handleregister() {\n        this.urscInstance.registerMember(this.fromData.username, this.fromData.password, {from: this.account,gas:210000}).on('receipt', function (receipt) \n          {console.log(receipt);\n          Message({\n          message: \"注册成功\",\n          type: \"success\"\n        });});\n      //var self = this;\n      //this.$store.state.contractInstance().methods.\n      // this.urscInstance.registerMember(this.fromData.username, this.fromData.password).send({from: this.account,gas:300000}).on('receipt', function (receipt) {\n      //        console.log(receipt);\n      //           this.$message.success('注册成功');\n      //          });\n    }\n  }\n\n};\n</script>\n\n<style lang=\"less\" scoped>\n.login-wrap {\n  height: 100%;\n  background: #324152;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .login-form {\n    background: #fff;\n    width: 560px;\n    height: 400px;\n    padding: 30px;\n    border-radius: 12px;\n\n    .btn-login {\n      width: 100%;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}