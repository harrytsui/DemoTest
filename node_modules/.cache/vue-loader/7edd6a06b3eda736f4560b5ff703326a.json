{"remainingRequest":"/Users/harry/CSChain/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/harry/CSChain/src/components/home/order-list.vue?vue&type=style&index=0&id=58bc5a8d&lang=less&scoped=true&","dependencies":[{"path":"/Users/harry/CSChain/src/components/home/order-list.vue","mtime":1646289811425},{"path":"/Users/harry/CSChain/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/harry/CSChain/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucGFnaW5hdGlvbiB7CiAgbWFyZ2luLXRvcDogMTBweDsKICBtYXJnaW4tYm90dG9tOiAxMnB4Owp9Cg=="},{"version":3,"sources":["order-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA","file":"order-list.vue","sourceRoot":"src/components/home","sourcesContent":["<template>\n  <div>\n    <el-table :data=\"tableData\" max-height=\"840px\">\n      <el-table-column label=\"序号\" prop=\"num\"> </el-table-column>\n\n      <el-table-column label=\"任务名称\" prop=\"taskname\"> </el-table-column>\n\n      <el-table-column label=\"任务ID\" prop=\"id\"> </el-table-column>\n\n      <el-table-column label=\"任务描述\" prop=\"taskdescription\"></el-table-column>\n\n      <el-table-column label=\"状态\" prop=\"status\"> </el-table-column>\n\n      <el-table-column label=\"所属角色\" prop=\"role\"> </el-table-column>\n\n      <el-table-column label=\"创建时间\" prop=\"createtime\"> </el-table-column>\n\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"publishTask(scope.$index, scope.row)\"\n          >\n            查看\n          </el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"publishTask(scope.$index, scope.row)\"\n          >\n            完成\n          </el-button>\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"publishTask(scope.$index, scope.row)\"\n          >\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-pagination\n      class=\"pagination\"\n      background\n      layout=\"prev, pager, next\"\n      :total=\"50\"\n      :page-size=\"12\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport Web3 from \"web3\";\nimport contract from \"truffle-contract\";\nimport Tpsc from '../../../build/contracts/Tpsc.json';\nimport { Message } from \"element-ui\";\n\nexport default {\n  data() {\n    return {\n      tableData: [{\n        num: '1',\n        taskname: '噪音数据采集',\n        id: '000002',\n        taskdescription: '采集城郊噪音数据',\n        status: '进行中',\n        role: '任务发起者',\n        createtime: '2021/12/18'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/12/18',\n        status: '交易成功'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/4/18 16:22:01',\n        status: '交易成功'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/4/18 16:22:01',\n        status: '交易成功'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/4/18 16:22:01',\n        status: '交易成功'\n      }, {\n        id: 'EH115565478657',\n        taskname: '一曲',\n        total_amount: '58.00',\n        payment_amount: '58.00',\n        date: '2021/4/18 16:22:01',\n        status: '交易成功'\n      },],\n    }\n  },\n\n  async created() {\n    // 初始化web3及账号\n    await this.initWeb3Account()\n    // 初始化合约实例\n    await this.initContract()\n  },\n\n  methods: {\n    async initWeb3Account() {\n      if (window.ethereum) {\n        this.provider = window.ethereum;\n        try {\n          await window.ethereum.enable();\n        } catch (error) {\n          //   console.log(\"User denied account access\");\n        }\n      } else if (window.web3) {\n        this.provider = window.web3.currentProvider;\n      } else {\n        this.provider = new Web3.providers.HttpProvider(\"http://127.0.0.1:8545\");\n      }\n        this.web3 = new Web3(this.provider);\n        this.web3.eth.getAccounts().then(accs  => {\n        this.account = accs[0]\n      });\n    },\n\n    async initContract() {\n      const tpscContract = contract(Tpsc);\n      tpscContract.setProvider(this.provider);\n      this.tpscInstance = await tpscContract.deployed();\n    },\n\n    // 发布新任务\n    async publishTask(index, row) {\n      this.tpscInstance.addTask('1', '2', '2','2', {from: this.account,gas:210000}).on('receipt', function (receipt) \n          {console.log(receipt);\n          Message({\n          message: \"发布成功\",\n          type: \"success\"\n        });});\n\n      this.$alert(`删除 “${row.id}” ？`, '确认删除', {\n        confirmButtonText: '确定',\n        callback: action => {\n          if (action === 'cancel') {\n            this.$message.info('操作取消');\n          }\n        }\n      });\n    }\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.pagination {\n  margin-top: 10px;\n  margin-bottom: 12px;\n}\n</style>"]}]}